import { SummariesPublisher } from '../api/summaries.publisher';
import { StructureSummariesPanelConfigConverter } from '../core-read/config/structure.summaries-panel.config-converter';
import { StructureSummariesConfigArchive } from '../core-read/config/structure.summaries-config.archive';
import { SummariesDispatcher } from './summaries.dispatcher';
export class SummariesDomainPublisher extends SummariesPublisher {
    constructor(summariesDispatcher, configConverter, structureSummariesConfigArchive) {
        super();
        this.summariesDispatcher = summariesDispatcher;
        this.configConverter = configConverter;
        this.structureSummariesConfigArchive = structureSummariesConfigArchive;
    }
    setSummariesEnabled(enabled, structureId) {
        this.summariesDispatcher.setSummariesEnabled(enabled, structureId);
    }
    setConfig(config, structureId) {
        const summariesPanelConfig = this.configConverter.convert(config);
        this.setSummariesEnabled(config.enabled, structureId);
        this.structureSummariesConfigArchive.next(structureId, summariesPanelConfig);
    }
}
SummariesDomainPublisher.services = [SummariesDispatcher, StructureSummariesPanelConfigConverter, StructureSummariesConfigArchive];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3VtbWFyaWVzLmRvbWFpbi1wdWJsaXNoZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9idWlsZC1jbGkvcHJvamVjdHMvbmd4LWdyaWQvc3JjL2NvcmUvc3RydWN0dXJlL3N1bW1hcmllcy9zcmMvY29yZS9zdW1tYXJpZXMuZG9tYWluLXB1Ymxpc2hlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUVoRSxPQUFPLEVBQUUsc0NBQXNDLEVBQUUsTUFBTSxnRUFBZ0UsQ0FBQztBQUN4SCxPQUFPLEVBQUUsK0JBQStCLEVBQUUsTUFBTSx3REFBd0QsQ0FBQztBQUN6RyxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUc3RCxNQUFNLE9BQU8sd0JBQXlCLFNBQVEsa0JBQWtCO0lBRS9ELFlBQTZCLG1CQUF3QyxFQUNqRCxlQUF1RCxFQUN2RCwrQkFBZ0U7UUFDbkYsS0FBSyxFQUFFLENBQUM7UUFIb0Isd0JBQW1CLEdBQW5CLG1CQUFtQixDQUFxQjtRQUNqRCxvQkFBZSxHQUFmLGVBQWUsQ0FBd0M7UUFDdkQsb0NBQStCLEdBQS9CLCtCQUErQixDQUFpQztJQUVwRixDQUFDO0lBSUQsbUJBQW1CLENBQUMsT0FBZ0IsRUFBRSxXQUF3QjtRQUM3RCxJQUFJLENBQUMsbUJBQW1CLENBQUMsbUJBQW1CLENBQUMsT0FBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQ3BFLENBQUM7SUFFRCxTQUFTLENBQUMsTUFBdUIsRUFBRSxXQUF3QjtRQUUxRCxNQUFNLG9CQUFvQixHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRWxFLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBQ3RELElBQUksQ0FBQywrQkFBK0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLG9CQUFvQixDQUFDLENBQUM7SUFDOUUsQ0FBQzs7QUFaZSxpQ0FBUSxHQUFHLENBQUMsbUJBQW1CLEVBQUUsc0NBQXNDLEVBQUUsK0JBQStCLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0cnVjdHVyZUlkIH0gZnJvbSAnLi4vLi4vLi4vc3RydWN0dXJlLWNvcmUvc3JjL2FwaS9nbG9iYWwvc3RydWN0dXJlLmlkJztcbmltcG9ydCB7IFN1bW1hcmllc1B1Ymxpc2hlciB9IGZyb20gJy4uL2FwaS9zdW1tYXJpZXMucHVibGlzaGVyJztcbmltcG9ydCB7IFN1bW1hcmllc0NvbmZpZyB9IGZyb20gJy4uL2FwaS9jb25maWcvc3VtbWFyaWVzLWNvbmZpZyc7XG5pbXBvcnQgeyBTdHJ1Y3R1cmVTdW1tYXJpZXNQYW5lbENvbmZpZ0NvbnZlcnRlciB9IGZyb20gJy4uL2NvcmUtcmVhZC9jb25maWcvc3RydWN0dXJlLnN1bW1hcmllcy1wYW5lbC5jb25maWctY29udmVydGVyJztcbmltcG9ydCB7IFN0cnVjdHVyZVN1bW1hcmllc0NvbmZpZ0FyY2hpdmUgfSBmcm9tICcuLi9jb3JlLXJlYWQvY29uZmlnL3N0cnVjdHVyZS5zdW1tYXJpZXMtY29uZmlnLmFyY2hpdmUnO1xuaW1wb3J0IHsgU3VtbWFyaWVzRGlzcGF0Y2hlciB9IGZyb20gJy4vc3VtbWFyaWVzLmRpc3BhdGNoZXInO1xuXG5cbmV4cG9ydCBjbGFzcyBTdW1tYXJpZXNEb21haW5QdWJsaXNoZXIgZXh0ZW5kcyBTdW1tYXJpZXNQdWJsaXNoZXIge1xuXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgc3VtbWFyaWVzRGlzcGF0Y2hlcjogU3VtbWFyaWVzRGlzcGF0Y2hlcixcblx0XHRcdFx0cHJpdmF0ZSByZWFkb25seSBjb25maWdDb252ZXJ0ZXI6IFN0cnVjdHVyZVN1bW1hcmllc1BhbmVsQ29uZmlnQ29udmVydGVyLFxuXHRcdFx0XHRwcml2YXRlIHJlYWRvbmx5IHN0cnVjdHVyZVN1bW1hcmllc0NvbmZpZ0FyY2hpdmU6IFN0cnVjdHVyZVN1bW1hcmllc0NvbmZpZ0FyY2hpdmUpIHtcblx0XHRzdXBlcigpO1xuXHR9XG5cblx0c3RhdGljIHJlYWRvbmx5IHNlcnZpY2VzID0gW1N1bW1hcmllc0Rpc3BhdGNoZXIsIFN0cnVjdHVyZVN1bW1hcmllc1BhbmVsQ29uZmlnQ29udmVydGVyLCBTdHJ1Y3R1cmVTdW1tYXJpZXNDb25maWdBcmNoaXZlXTtcblxuXHRzZXRTdW1tYXJpZXNFbmFibGVkKGVuYWJsZWQ6IGJvb2xlYW4sIHN0cnVjdHVyZUlkOiBTdHJ1Y3R1cmVJZCk6IHZvaWQge1xuXHRcdHRoaXMuc3VtbWFyaWVzRGlzcGF0Y2hlci5zZXRTdW1tYXJpZXNFbmFibGVkKGVuYWJsZWQsIHN0cnVjdHVyZUlkKTtcblx0fVxuXG5cdHNldENvbmZpZyhjb25maWc6IFN1bW1hcmllc0NvbmZpZywgc3RydWN0dXJlSWQ6IFN0cnVjdHVyZUlkKTogdm9pZCB7XG5cblx0XHRjb25zdCBzdW1tYXJpZXNQYW5lbENvbmZpZyA9IHRoaXMuY29uZmlnQ29udmVydGVyLmNvbnZlcnQoY29uZmlnKTtcblxuXHRcdHRoaXMuc2V0U3VtbWFyaWVzRW5hYmxlZChjb25maWcuZW5hYmxlZCwgc3RydWN0dXJlSWQpO1xuXHRcdHRoaXMuc3RydWN0dXJlU3VtbWFyaWVzQ29uZmlnQXJjaGl2ZS5uZXh0KHN0cnVjdHVyZUlkLCBzdW1tYXJpZXNQYW5lbENvbmZpZyk7XG5cdH1cblxufVxuIl19